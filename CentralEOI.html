<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Central Insurance Form</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .hidden { display: none; }
    .error { border-color: #ef4444; }
    .error-message { color: #ef4444; font-size: 0.875rem; margin-top: 0.25rem; }
    .sf-date-field { color: #000 !important; }
    .sf-date-field::placeholder { color: #a0aec0 !important; opacity: 1; }
    .int-add-supp-fields input { margin-bottom: 0.5rem; }
  </style>
</head>

<script src="https://cdn.jsdelivr.net/npm/pikaday/pikaday.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pikaday/css/pikaday.css">

<body class="bg-gray-100 flex items-center justify-center min-h-screen p-6">
  <form class="bg-white p-8 rounded-2xl shadow-md w-full max-w-xl space-y-6"
        id="mainForm"
        autocomplete="off">

    <h2 class="text-2xl font-bold text-center text-gray-800">Central Insurance Form</h2>
    <!-- (Keep previous hidden and policy change fields here unchanged) -->
    <input type="hidden" name="oid" value="00DU7000006EuID">
    <input type="hidden" name="recordType" value="012U7000003Ie25IAC">
    <input type="hidden" name="retURL" value="https://bennettandporter.com">
    <input type="hidden" name="firstname" value="Central EOIRequest">
    <input type="hidden" name="lastname" value="Lead">
    <input type="hidden" name="status" value="New">
    <input type="hidden" name="phone" value="2367231291">
    <input type="hidden" name="leadsource" value="Web Form">
    <input type="hidden" name="company" value="Caelius Test Central New">
    <input type="hidden" id="interestAddCount" name="interestAddCountc" value="1">
    <input type="hidden" id="00NU7000005zuNN" name="00NU7000005zuNN" value="EOI">

    <!-- Policy Changes Section -->
    <section class="bg-gray-50 border rounded-xl p-6 shadow-inner" aria-label="Policy Changes Section">
      <h3 class="text-xl font-semibold mb-4 text-gray-700">Policy Changes</h3>
      <div class="mb-4">
        <label for="email" class="block text-sm font-medium text-gray-700">Email<span class="text-red-600">*</span></label>
        <input type="email" id="email" name="email"
               class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
               autocomplete="off" required>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Select the Request Type<span class="text-red-600">*</span></label>
        <div class="flex space-x-4 mb-2">
          <label class="inline-flex items-center">
            <input type="radio" name="00NU7000006IOzh" value="Quote" required class="mr-2"> Quote
          </label>
          <label class="inline-flex items-center">
            <input type="radio" name="00NU7000006IOzh" value="Endorse" required class="mr-2"> Endorsement
          </label>
        </div>
        <div id="quotePolicyError" class="error-message hidden">Please select an option</div>
      </div>
      <div class="space-y-4 mt-2">
        <div>
          <label for="00NU7000005zuX3" class="block text-sm font-medium text-gray-700">
            Policy Number<span class="text-red-600">*</span>
          </label>
          <input type="text" id="00NU7000005zuX3" name="00NU7000005zuX3"
                 required maxlength="9" minlength="9" pattern="OY\d{7}"
                 class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm"
                 title="Policy Number must start with OY and be 9 characters total e.g., OY1234567">
          <div id="policyNumberError" class="error-message hidden">
            Policy Number must start with OY and be 9 digits total (e.g., OY1234567).
          </div>
        </div>
        
        <!-- Effective Date Field (replace your input) -->
<div>
  <label for="00NU7000005zuLl" class="block text-sm font-medium text-gray-700">
    Effective Date<span class="text-red-600">*</span>
  </label>
  <input type="text"
         id="00NU7000005zuLl"
         name="00NU7000005zuLl"
         placeholder="MM/DD/YYYY"
         autocomplete="off"
         required
         class="mt-1 w-full p-2 border border-gray-700 rounded-lg shadow-sm sf-date-field">
  <div id="00NU7000005zuLlerror" class="error-message hidden">
    Enter a valid MM/DD/YYYY date.
  </div>
</div>
      </div>
    </section>
    <!-- Additional Interest Sections (ONLY 1 and 2) -->
    <div id="additionalInterestContainer">
      <!-- Additional Interest 1 -->
      <section class="bg-gray-50 border rounded-xl p-6 shadow-inner mb-6" id="additionalInterest1">
        <h3 class="text-xl font-semibold mb-4 text-gray-700">Additional Interest 1</h3>
        <div class="mb-4">
          <label for="name1c" class="block text-sm font-medium text-gray-700">Name<span class="text-red-600">*</span></label>
          <input type="text" id="name1c" name="name1c" maxlength="30"
                 class="w-full p-2 border border-gray-300 rounded-lg" required>
        </div>
        <div class="mb-4">
          <label for="00NU7000007CBN3" class="block text-sm font-medium text-gray-700">
            Name Continued<span class="text-red-600">*</span>
          </label>
          <input id="00NU7000007CBN3" name="00NU7000007CBN3" maxlength="30" size="20" type="text"
                 class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm" required />
        </div>
        <div class="mb-4">
          <label for="address1c" class="block text-sm font-medium text-gray-700">Address<span class="text-red-600">*</span></label>
          <input type="text" id="address1c" name="address1c" maxlength="30"
                 class="w-full p-2 border border-gray-300 rounded-lg" required>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-2">
          <div>
            <label for="city1c" class="block text-sm font-medium text-gray-700">City<span class="text-red-600">*</span></label>
            <input type="text" id="city1c" name="city1c" class="w-full p-2 border border-gray-300 rounded-lg" required>
          </div>
          <div>
            <label for="state1c" class="block text-sm font-medium text-gray-700">State<span class="text-red-600">*</span></label>
            <select id="state1c" name="state1c"
              class="w-full p-2 border border-gray-300 rounded-lg" required>
              <option value="">--None--</option>
              <option value="Arizona">Arizona</option>
              <option value="Alabama">Alabama</option>
              <!-- Add other states as needed -->
            </select>
          </div>
        </div>
        <div class="mb-4">
          <label for="loanNumber1c" class="block text-sm font-medium text-gray-700">Loan Number<span class="text-red-600">*</span></label>
          <input type="text" id="loanNumber1c" name="loanNumber1c"
                 class="w-full p-2 border border-gray-300 rounded-lg" required>
        </div>
        <!-- IfAdditionalInfo for AI 1 -->
        <div class="mb-4">
          <label for="00NU7000007chSv" class="block text-sm font-medium text-gray-700">
            Is the name to be printed on the policy declaration too long to fit in the fields above, or different than the above name/mailing address?
          </label>
          <select id="00NU7000007chSv" name="00NU7000007chSv" title="IfAdditionalInfo"
                  class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm">
            <option value="">--None--</option>
            <option value="Y">Yes</option>
            <option value="N">No</option>
          </select>
        </div>
        <!-- Reveal if Y is selected -->
        <div class="mb-4 hidden" id="ai1SuppFields">
          <label for="00NU7000007bhEr" class="block text-sm font-medium text-gray-700">
            Enter name as it should appear on the policy declaration:
          </label>
          <input id="00NU7000007bhEr" name="00NU7000007bhEr" maxlength="30" size="20" type="text"
                 class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm" />
          <div class="int-add-supp-fields mt-4">
            <input id="00NU700000749FD" name="00NU700000749FD" maxlength="30" type="text" class="w-full p-2 border border-gray-300 rounded-lg" />
            <input id="00NU7000007bfLH" name="00NU7000007bfLH" maxlength="30" type="text" class="w-full p-2 border border-gray-300 rounded-lg" />
            <input id="00NU70000074AET" name="00NU70000074AET" maxlength="30" type="text" class="w-full p-2 border border-gray-300 rounded-lg" />
            <input id="00NU7000007bhI5" name="00NU7000007bhI5" maxlength="30" type="text" class="w-full p-2 border border-gray-300 rounded-lg" />
            <input id="00NU7000007blVN" name="00NU7000007blVN" maxlength="30" type="text" class="w-full p-2 border border-gray-300 rounded-lg" />
            <input id="00NU7000007blbp" name="00NU7000007blbp" maxlength="30" type="text" class="w-full p-2 border border-gray-300 rounded-lg" />
            <input id="00NU7000007bhbT" name="00NU7000007bhbT" maxlength="30" type="text" class="w-full p-2 border border-gray-300 rounded-lg" />
          </div>
        </div>
      </section>

      <!-- Additional Interest 2 -->
      <section class="hidden bg-gray-50 border rounded-xl p-6 shadow-inner mb-6" id="additionalInterest2">
        <h3 class="text-xl font-semibold mb-4 text-gray-700">Additional Interest 2</h3>
        <div class="mb-4">
          <label for="name2c" class="block text-sm font-medium text-gray-700">Name<span class="text-red-600">*</span></label>
          <input type="text" id="name2c" name="name2c" maxlength="30"
                 class="w-full p-2 border border-gray-300 rounded-lg" required>
        </div>
        <div class="mb-4">
          <label for="00NU7000007bh1x" class="block text-sm font-medium text-gray-700">
            Name Continued<span class="text-red-600">*</span>
          </label>
          <input id="00NU7000007bh1x" name="00NU7000007bh1x" maxlength="30" size="20" type="text"
                 class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm" required />
        </div>
        <div class="mb-4">
          <label for="address2c" class="block text-sm font-medium text-gray-700">Address<span class="text-red-600">*</span></label>
          <input type="text" id="address2c" name="address2c" maxlength="30"
                 class="w-full p-2 border border-gray-300 rounded-lg" required>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-2">
          <div>
            <label for="city2c" class="block text-sm font-medium text-gray-700">City<span class="text-red-600">*</span></label>
            <input type="text" id="city2c" name="city2c" class="w-full p-2 border border-gray-300 rounded-lg" required>
          </div>
          <div>
            <label for="state2c" class="block text-sm font-medium text-gray-700">State<span class="text-red-600">*</span></label>
            <select id="state2c" name="state2c"
              class="w-full p-2 border border-gray-300 rounded-lg" required>
              <option value="">--None--</option>
              <option value="Arizona">Arizona</option>
              <option value="Alabama">Alabama</option>
              <!-- Add other states as needed -->
            </select>
          </div>
        </div>
        <div class="mb-4">
          <label for="loanNumber2c" class="block text-sm font-medium text-gray-700">Loan Number<span class="text-red-600">*</span></label>
          <input type="text" id="loanNumber2c" name="loanNumber2c"
                 class="w-full p-2 border border-gray-300 rounded-lg" required>
        </div>
        <!-- IfAdditionalInfo for AI 2 -->
        <div class="mb-4">
          <label for="00NU7000007chZN" class="block text-sm font-medium text-gray-700">
            Is the name to be printed on the policy declaration too long to fit in the fields above, or different than the above name/mailing address?
          </label>
          <select id="00NU7000007chZN" name="00NU7000007chZN" title="IfAdditionalInfo 2"
                  class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm">
            <option value="">--None--</option>
            <option value="Y">Yes</option>
            <option value="N">No</option>
          </select>
        </div>
        <!-- Reveal if Y is selected -->
        <div class="mb-4 hidden" id="ai2SuppFields">
          <label for="00NU7000007cZYb" class="block text-sm font-medium text-gray-700">
            Enter name as it should appear on the policy declaration:
          </label>
          <input id="00NU7000007cZYb" name="00NU7000007cZYb" maxlength="30" size="20" type="text"
                 class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm" />
          <div class="int-add-supp-fields mt-4">
            <input id="00NU70000074AUb" name="00NU70000074AUb" maxlength="30" type="text" class="w-full p-2 border border-gray-300 rounded-lg" />
            <input id="00NU7000007cSdn" name="00NU7000007cSdn" maxlength="30" type="text" class="w-full p-2 border border-gray-300 rounded-lg" />
            <input id="00NU70000074Akj" name="00NU70000074Akj" maxlength="30" type="text" class="w-full p-2 border border-gray-300 rounded-lg" />
            <input id="00NU7000007cZiH" name="00NU7000007cZiH" maxlength="30" type="text" class="w-full p-2 border border-gray-300 rounded-lg" />
            <input id="00NU7000007ca8C" name="00NU7000007ca8C" maxlength="30" type="text" class="w-full p-2 border border-gray-300 rounded-lg" />
            <input id="00NU7000007cauT" name="00NU7000007cauT" maxlength="30" type="text" class="w-full p-2 border border-gray-300 rounded-lg" />
            <input id="00NU7000007cazJ" name="00NU7000007cazJ" maxlength="30" type="text" class="w-full p-2 border border-gray-300 rounded-lg" />
          </div>
        </div>
      </section>
    </div>

    <!-- Add Additional Interest Button -->
    <button id="addAdditionalInterestBtn" type="button"
            class="bg-teal-700 hover:bg-teal-700 text-white px-5 py-2 rounded-lg flex items-center gap-2 mt-4 shadow">
      <span class="text-lg font-bold">+</span>
      <span>Add a New Item</span>
    </button>
    <p id="additionalInterestLimitMsg" class="text-red-600 text-sm mt-2 hidden">
      Maximum 2 interests allowed.
    </p>

<section class="bg-gray-50 border rounded-xl p-6 shadow-inner mb-6" aria-label="Payor Information">
  <h3 class="text-xl font-semibold mb-4 text-gray-700">Payor Information</h3>
  <div class="mb-4">
    <label for="SendBillTo" class="block text-sm font-medium text-gray-700">
      Mail Bill To<span class="text-red-600">*</span>
    </label>
    <select id="SendBillTo" name="SendBillToc" required
            class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm mb-3">
      <option value="">--None--</option>
      <option value="Mortgagee">Escrow (bill to mortgage)</option>
      <option value="Insured">Non Escrow (bill to insured)</option>
    </select>
  </div>
  <div class="mb-4" id="billByMailContainer" style="display: none;">
    <label for="BillByMail" class="block text-sm font-medium text-gray-700">Bill By Mail</label>
    <select id="BillByMail" name="BillByMailc"
      class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm">
      <option value="">--None--</option>
      <option value="Full Pay">Full Pay</option>
      <option value="2-Pay">2-Pay</option>
      <option value="4-Pay">4-Pay</option>
      <option value="Monthly Pay">Monthly Pay</option>
    </select>
  </div>
</section>


    <div class="pt-4">
      <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg shadow">
        Submit
      </button>
    </div>
  </form>
  
  <script>
    
   // -------- Additional Interests: Add Button (limit to 2) --------
// -------- Additional Interests: Add Button (limit to 2) --------
document.addEventListener('DOMContentLoaded', function () {
  let currentInterest = 1;
  const addBtn = document.getElementById('addAdditionalInterestBtn');
  const limitMsg = document.getElementById('additionalInterestLimitMsg');
  if (addBtn) {
    addBtn.addEventListener('click', function () {
      if (currentInterest === 1) {
        document.getElementById('additionalInterest2').classList.remove('hidden');
        currentInterest++;
        addBtn.disabled = true;
        addBtn.classList.add('opacity-50', 'cursor-not-allowed');
      }
      if (limitMsg) {
        limitMsg.classList.toggle('hidden', currentInterest < 2);
      }
    });
  }
});

// -------- Show/hide supplemental fields for AI 1 --------
document.addEventListener('DOMContentLoaded', function () {
  var ai1Sel = document.getElementById("00NU7000007chSv");
  var ai1Supp = document.getElementById("ai1SuppFields");
  if (ai1Sel && ai1Supp) {
    ai1Sel.addEventListener("change", function() {
      if (this.value === "Y") {
        ai1Supp.classList.remove("hidden");
      } else {
        ai1Supp.classList.add("hidden");
        ai1Supp.querySelectorAll("input").forEach(f => f.value = "");
      }
    });
  }
});

// -------- Show/hide supplemental fields for AI 2 --------
document.addEventListener('DOMContentLoaded', function () {
  var ai2Sel = document.getElementById("00NU7000007chZN");
  var ai2Supp = document.getElementById("ai2SuppFields");
  if (ai2Sel && ai2Supp) {
    ai2Sel.addEventListener("change", function() {
      if (this.value === "Y") {
        ai2Supp.classList.remove("hidden");
      } else {
        ai2Supp.classList.add("hidden");
        ai2Supp.querySelectorAll("input").forEach(f => f.value = "");
      }
    });
  }
});

// -------- Payor Information Section show/hide Bill By Mail (Mail Bill To) --------
document.addEventListener('DOMContentLoaded', function () {
  var sendBillTo = document.getElementById('SendBillTo');
  var billByMailContainer = document.getElementById('billByMailContainer');
  if (!sendBillTo) return;
  function updateBillByMail() {
    // Value is "Insured" for "Non Escrow(bill to insured)" option
    if (sendBillTo.value === 'Insured') {
      billByMailContainer.style.display = 'block';
    } else {
      billByMailContainer.style.display = 'none';
      billByMailContainer.querySelectorAll('select, input').forEach(f => f.value = '');
    }
  }
  sendBillTo.addEventListener('change', updateBillByMail);
  updateBillByMail();
});

// -------- Effective Date with Pikaday and MM/DD/YYYY regex --------
document.addEventListener('DOMContentLoaded', function () {
  var effDate = document.getElementById('00NU7000005zuLl');
  var effErr = document.getElementById('00NU7000005zuLlerror');
  if (!effDate) return;
  var pikaday = new Pikaday({
    field: effDate,
    format: 'MM/DD/YYYY',
    toString(date, format) {
      // Format as MM/DD/YYYY
      const mm = String(date.getMonth() + 1).padStart(2, '0');
      const dd = String(date.getDate()).padStart(2, '0');
      const yyyy = date.getFullYear();
      return `${mm}/${dd}/${yyyy}`;
    },
    parse(dateString, format) {
      // Parse MM/DD/YYYY only
      const match = dateString.match(/^(0[1-9]|1[0-2])\/(0[1-9]|[12][0-9]|3[01])\/(1[0-9]{3}|2[0-9]{3}|30[0-9]{2})$/);
      if(!match) return null;
      return new Date(match[3], match[1] - 1, match[2]);
    }
  });
  function validateEffDate() {
    const value = effDate.value;
    const valid = /^(0[1-9]|1[0-2])\/(0[1-9]|[12][0-9]|3[01])\/(1[0-9]{3}|2[0-9]{3}|30[0-9]{2})$/.test(value);
    effDate.setCustomValidity(valid ? "" : "Invalid date format MM/DD/YYYY");
    if (effErr) effErr.classList.toggle('hidden', valid);
    effDate.classList.toggle('error', !valid);
  }
  effDate.addEventListener('input', validateEffDate);
  effDate.addEventListener('change', validateEffDate);
});

// -------- Policy Number live validation --------
document.addEventListener('DOMContentLoaded', function () {
  const policyNumberInput = document.getElementById('00NU7000005zuX3');
  const policyNumberError = document.getElementById('policyNumberError');
  if (policyNumberInput && policyNumberError) {
    policyNumberInput.addEventListener('input', function () {
      const val = policyNumberInput.value.trim();
      const valid = /^OY\d{7}$/.test(val);
      policyNumberInput.classList.toggle('error', !valid && val.length > 0);
      policyNumberError.classList.toggle('hidden', valid || val.length == 0);
      policyNumberInput.setCustomValidity(valid || val.length === 0 ? "" : "Policy Number must start with OY and be 9 characters e.g., OY1234567");
    });
  }
});

// -------- Main validation on submit --------
document.addEventListener('DOMContentLoaded', function () {
  var form = document.getElementById('mainForm');
  if (form) {
    form.addEventListener('submit', function(e) {
      // Validate Policy Number
      const policyNumberInput = document.getElementById('00NU7000005zuX3');
      const policyNumberError = document.getElementById('policyNumberError');
      if (policyNumberInput && (!/^OY\d{7}$/.test(policyNumberInput.value.trim()))) {
        policyNumberInput.classList.add('error');
        if (policyNumberError) policyNumberError.classList.remove('hidden');
        policyNumberInput.focus();
        e.preventDefault();
        return;
      }
      // Validate Effective Date
      const effDate = document.getElementById('00NU7000005zuLl');
      const effErr = document.getElementById('00NU7000005zuLlerror');
      if (effDate && !/^(0[1-9]|1[0-2])\/(0[1-9]|[12][0-9]|3[01])\/(1[0-9]{3}|2[0-9]{3}|30[0-9]{2})$/.test(effDate.value)) {
        effDate.classList.add('error');
        if (effErr) effErr.classList.remove('hidden');
        effDate.focus();
        e.preventDefault();
        return;
      }
      // Scroll to first error if any errors present
      const invalid = this.querySelector('.error');
      if (invalid) {
        e.preventDefault();
        invalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    });
  }
});

  </script>
</body>
</html>
